var people=function(){var e={paths:{getPeople:config.ajaxPath+"/getPeople.php"},listPeopleContainer:$("#people-list"),searchField:$(".search-all>input"),searchButton:$(".search-all>button"),canFetch:!0,tab:"all"},a=function(){config.isMobile||e.searchField.focus();var a=acadefly.URLParam("q");a&&e.searchField.val(a);var i=acadefly.URLParam("t");i&&($(".radio-nav label").removeClass("active"),$("#"+i).addClass("active"),e.tab=i),$(".radio-nav").click(function(){setTimeout(function(){var a=$(".radio-nav label.active input").val();acadefly.URLParam("t",a),e.tab=a,t()},10)});var n;e.searchField.keyup(function(){e.listPeopleContainer.fadeOut(100),clearTimeout(n),n=setTimeout(t,100)}),e.searchButton.click(t),e.listPeopleContainer.infiniteScroll({ajaxFunction:l,selector:".thumbnail-wrapper",offset:240}),t()},t=function(){acadefly.URLParam("q",e.searchField.val()),$.ajax({method:"GET",url:e.paths.getPeople,data:{query:e.searchField.val(),tab:e.tab,offset:0,count:Math.floor(e.listPeopleContainer.width()/160)*(Math.floor($(window).height()/211)+2)},success:function(a){e.listPeopleContainer.fadeIn(100).html(a)}})},l=function(a){e.canFetch&&(e.canFetch=!1,$.ajax({method:"GET",url:e.paths.getPeople,data:{query:e.searchField.val(),tab:e.tab,offset:a,count:e.listPeopleContainer.width()/160*2},success:function(a){e.listPeopleContainer.append(a),e.canFetch=!0}}))};return{init:a}}();$(function(){people.init()});