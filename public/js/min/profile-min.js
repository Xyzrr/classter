!function($){"use strict";$.fn.profileEdit=function(t){return this.each(function(){var e=$(this).find("div[data-profile='read']"),a=$(this).find("form[data-profile='edit']"),i=function(t){t.preventDefault(),e.toggle(200),a.toggle(200)};a.hide(),$(this).find("button[data-profile='toggle-edit'], button[data-profile='cancel-edit']").click(i),$(this).find("button[data-profile='save-edit']").click(function(o){i(o),t(e,a)})})}}(window.jQuery);var profile=function(){var t={paths:{editAbout:config.ajaxPath+"/profile/edit-about.php",editInfo:config.ajaxPath+"/profile/edit-info.php",editName:config.ajaxPath+"/profile/edit-name.php",getOverview:config.ajaxPath+"/profile/getOverview.php",getSchedule:config.ajaxPath+"/profile/getSchedule.php",getPosts:config.ajaxPath+"/profile/getPosts.php",getReputation:config.ajaxPath+"/profile/getReputation.php"},tabs:{overview:$("a[href='#overview']"),schedule:$("a[href='#schedule-tab']"),posts:$("a[href='#posts']"),reputation:$("a[href='#reputation']")},tabContents:{overview:$("#overview"),schedule:$("#schedule-tab"),posts:$("#posts"),reputation:$("#reputation")},targetIDField:$("#target-id")},e=function(){if(t.targetIDField.length){switch($("#name").profileEdit(l),t.targetID=t.targetIDField.val(),$(".nav>li.active>a").attr("href")){case"#overview":a();break;case"#schedule-tab":i();break;case"#posts":o();break;case"#reputation":n()}t.tabs.schedule.on("shown.bs.tab",i),t.tabs.overview.on("shown.bs.tab",a),t.tabs.posts.on("shown.bs.tab",o),t.tabs.reputation.on("shown.bs.tab",n)}},a=function(){$.ajax({method:"GET",url:t.paths.getOverview,data:{targetID:t.targetID},success:function(e){t.tabContents.overview.html(e),$("#about").profileEdit(s),$("#info").profileEdit(r);var a=$("#rep-panel"),i=parseInt(a.find("#question-rep").val(),10),o=parseInt(a.find("#answer-rep").val(),10),n=parseInt(a.find("#review-rep").val(),10),l=[{value:i,color:"#F7464A",highlight:"#FF5A5E",label:"Questions"},{value:o,color:"#46BFBD",highlight:"#5AD3D1",label:"Answers"},{value:n,color:"#FDB45C",highlight:"#FFC870",label:"Class Reviews"}],h={animateRotate:!1},u=$("#rep-pie-chart").get(0).getContext("2d"),c=new window.Chart(u).Pie(l,h);c.update()}})},i=function(){$.ajax({method:"GET",url:t.paths.getSchedule,data:{targetID:t.targetID},success:function(e){t.tabContents.schedule.html(e),$("#schedule").schedule()}})},o=function(){$.ajax({method:"GET",url:t.paths.getPosts,data:{targetID:t.targetID},success:function(e){t.tabContents.posts.html(e)}})},n=function(){$.ajax({method:"GET",url:t.paths.getReputation,data:{targetID:t.targetID},success:function(e){t.tabContents.reputation.html(e)}})},s=function(e,a){$.ajax({method:"POST",url:t.paths.editAbout,data:a.serialize(),success:function(t){e.find("#about-read").html(t)}})},r=function(e,a){$.ajax({method:"POST",url:t.paths.editInfo,data:a.serialize(),success:function(t){e.find("#grade-read").html(t)}})},l=function(e,a){$.ajax({method:"POST",url:t.paths.editName,data:a.serialize(),success:function(t){e.find("h1").html(t)}})};return{init:e}}();$(function(){profile.init()});
//# sourceMappingURL=./profile-min.map