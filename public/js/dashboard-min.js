!function($){$.fn.blockProgress=function(){var e=$(this),t=$('<div class="progress" id="block-progress"></div>'),a=$('<div class="progress-bar progress-bar-striped active"></div>'),s=$('<div class="time-left-wrapper"></div>'),n=$('<div class="time-left"></div>'),i=$('<div class="time-left-caret"></div>'),r=$("<span class='timer'></span>"),l={start:$("#start-time").val(),end:$("#end-time").val(),target:$("#target-time").val(),label:$("#label").val(),direction:$("#target-direction").val()},p=function(){var e=new Date,t=(e.getTime()/1e3-l.start)/(l.end-l.start)*100;t>100&&setTimeout(function(){location.reload()},1e3),a.css("width",t+"%");var i=l.end-e.getTime()/1e3,r=Math.floor(i%3600/60),p=Math.floor(i%60);n.html("<span class='count'>"+r+"</span>m <span class='count'>"+p+"</span>s left"),s.css("left",a.position().left+a.width()-s.width()/2)},o=function(){var e=new Date,t;t="until"===l.direction?l.target-e.getTime()/1e3:e.getTime()/1e3-l.target,0>t&&setTimeout(function(){location.reload()},1e3);var a=Math.floor(t/3600),s=Math.floor(t%3600/60),n=Math.floor(t%60);r.html("<div class='timer-unit'><span class='timer-count'>"+a+"</span><span class='timer-label'>HOURS</span></div><div class='timer-unit'><span class='timer-count'>"+s+"</span><span class='timer-label'>MINUTES</span></div><div class='timer-unit'><span class='timer-count'>"+n+"</span><span class='timer-label'>SECONDS</span></div>")},c=function(e,t){return("000000000"+e).substr(-t)};if(l.start){var d=new Date(1e3*l.start),v=new Date(1e3*l.end);e.append($("<span class='begin-time'>"+((d.getHours()+11)%12+1)+":"+c(d.getMinutes(),2)+"</span>")),e.append($("<span class='end-time'>"+((v.getHours()+11)%12+1)+":"+c(v.getMinutes(),2)+"</span>")),e.append(t).append(s),s.append(i).append(n),t.append(a),p(),setInterval(p,1e3)}else l.target&&(e.append(r),e.append($("<span class='timer-title'>"+l.label+"</span>")),o(),setInterval(o,1e3))}}(window.jQuery),$(function(){$(".block-progress-wrapper>.body").blockProgress()});