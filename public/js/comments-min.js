!function($){"use strict";$.fn.commentBox=function(){return this.each(function(){var t=$(this),n={paths:{getCommentBox:config.ajaxPath+"/getCommentBox.php",postComment:config.ajaxPath+"/postComment.php",deleteComment:config.ajaxPath+"/deleteComment.php"}},o=function(){$.ajax({method:"GET",url:n.paths.getCommentBox,data:{postID:t.data("id")},success:function(n){t.html(n),t.find(".comment-textarea").validify({position:"top"}),t.find(".comment-button").click(function(){t.find(".comment-form").show(200),t.find(".comment-textarea").focus(),t.find(".comment-button-wrapper").hide(200)}),t.find(".cancel").click(function(){t.find(".comment-button-wrapper").show(200),t.find(".comment-form").hide(200)}),t.find(".post-comment").click(e).validify({position:"right"}),t.find(".delete-button").click(function(){i($(this).parent().parent())}).validify({position:"right"})}})},e=function(){$.ajax({method:"POST",url:n.paths.postComment,data:{postID:t.data("id"),commentBody:t.find(".comment-textarea").val()},success:function(n){var e=$.parseJSON(n);e.success?o():t.find(".comment-textarea").validify(e.error)},error:function(){t.find(".post-comment").displayError()}})},i=function(t){$.ajax({method:"POST",url:n.paths.deleteComment,data:{commentID:t.data("id")},success:function(n){var o=$.parseJSON(n);o.success?t.hide(200):t.find(".delete-button").validify(o.error)},error:function(){t.find(".delete-button").displayError()}})};o()})}}(window.jQuery);