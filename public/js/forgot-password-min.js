var forgotPassword=function(){var i={sendEmailButton:$("#send-email-button"),emailField:$("#email-field"),passwordField:$("#password-field"),confirmPasswordField:$("#confirm-password-field"),resetPasswordButton:$("#reset-password-button"),userIDField:$("#user-id-field"),loginButton:$("#login-button")},o=function(){i.sendEmailButton.click(s).validify({position:"right"}),i.emailField.validify({position:"right"}),i.passwordField.validify({position:"right"}),i.confirmPasswordField.validify({position:"right"}),i.resetPasswordButton.click(a).validify({position:"right"})},s=function(o){o.preventDefault(),$.ajax({url:config.ajaxPath+"/sendResetPasswordEmail.php",method:"POST",data:{email:i.emailField.val()},success:function(o){$.clearErrors();var s=$.parseJSON(o);s.success?window.location="../check-email/?email="+encodeURI(i.emailField.val()):i.emailField.validify(s.email)},error:function(){i.sendEmailButton.displayError()}})},a=function(o){o.preventDefault(),$.ajax({url:config.ajaxPath+"/resetPassword.php",method:"POST",data:{userID:i.userIDField.val(),password:i.passwordField.val(),confirmPassword:i.confirmPasswordField.val()},success:function(o){$.clearErrors();var s=$.parseJSON(o);s.success?window.location="../done/":(i.passwordField.validify(s.password),i.confirmPasswordField.validify(s.confirmPassword))},error:function(){i.resetPasswordButton.displayError()}})};return{init:o}}();$(function(){forgotPassword.init()});